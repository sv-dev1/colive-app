{"version":3,"sources":["webpack:///./src/app/pages/flatemates/flatemates.module.ts","webpack:///./src/app/pages/flatemates/flatemates.page.html","webpack:///./src/app/pages/flatemates/flatemates.page.scss","webpack:///./src/app/pages/flatemates/flatemates.page.ts"],"names":[],"mappings":"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","file":"pages-flatemates-flatemates-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FlatematesPage } from './flatemates.page';\nimport {AccordionModule} from \"ngx-accordion\";\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FlatematesPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),AccordionModule\n  ],\n  declarations: [FlatematesPage]\n})\nexport class FlatematesPageModule {}\n","module.exports = \"<ion-header>\\r\\n   <ion-toolbar>\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n         <ion-menu-button></ion-menu-button>\\r\\n      </ion-buttons>\\r\\n      <ion-buttons slot=\\\"end\\\">\\r\\n         <ion-back-button defaultHref=\\\"dashboard\\\"></ion-back-button>\\r\\n      </ion-buttons>\\r\\n      <ion-title>Flatemates Issues</ion-title>\\r\\n   </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content fullscreen class=\\\"border\\\">\\r\\n   <ion-row>\\r\\n      <ion-col>\\r\\n         <button [routerLink]=\\\"['/add-issues']\\\" class=\\\"billList-class\\\">\\r\\n            Add Issues  \\r\\n            <ion-icon ios=\\\"ios-add-circle\\\" md=\\\"md-add-circle\\\" style=\\\"margin-top: 2px;\\\"></ion-icon>\\r\\n         </button>\\r\\n      </ion-col>\\r\\n   </ion-row>\\r\\n   <ion-row *ngIf=\\\"issuesArr?.length != 0\\\">\\r\\n      <ion-col>\\r\\n         <span> \\r\\n             <small>Click on issue to start thread.</small>\\r\\n          </span>\\r\\n      </ion-col>\\r\\n\\r\\n   </ion-row>\\r\\n   <ion-card *ngFor=\\\"let issue of issuesArr\\\" [routerLink]=\\\"['/issue-thread']\\\"  [queryParams]=\\\"{issueId: issue.issueId}\\\"> \\r\\n   <img src=\\\"https://apitx.kindlebit.com/uploads/{{issue.issueId}}\\\" onError=\\\"src='assets/images/Logo-colive.png'\\\" class=\\\"profile-img\\\" />\\r\\n   <ion-card-header>\\r\\n      <!-- <ion-card-subtitle>{{issue.title}}</ion-card-subtitle> -->\\r\\n      <ion-card-title>{{issue.flatemateIssue?.title}}\\r\\n            <span *ngIf=\\\"logId === issue.flatemateIssue?.userId\\\">\\r\\n               <ion-buttons (click)=\\\"removeIssue(issue.issueId)\\\" class=\\\"listingButton\\\">\\r\\n                  <ion-icon name=\\\"trash\\\"></ion-icon>\\r\\n                  Delete\\r\\n               </ion-buttons>\\r\\n            </span>\\r\\n      </ion-card-title>\\r\\n       \\r\\n   </ion-card-header>\\r\\n   <ion-card-content>\\r\\n          <span>Against {{issue.userProfile?.firstName}}</span>  <span *ngIf=\\\"issue.userProfile?.firstName == ''\\\"> {{issue.userProfile?.email}}</span><br/>  {{issue.flatemateIssue?.desc}}\\r\\n      \\r\\n   </ion-card-content>\\r\\n   </ion-card>\\r\\n   <ion-card>\\r\\n        <ion-item *ngIf=\\\"issuesArr?.length == 0\\\">\\r\\n              <ion-label style=\\\"font-size:18px;\\\">No issues uploaded</ion-label>\\r\\n      </ion-item>\\r\\n   </ion-card>\\r\\n  \\r\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ZsYXRlbWF0ZXMvZmxhdGVtYXRlcy5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Router,ActivatedRoute } from '@angular/router';\nimport { ItemService } from '../../services/item.service';\nimport { AlertController,ModalController,LoadingController ,ActionSheetController, Platform} from '@ionic/angular';\nimport { environment } from '../../../environments/environment';\nimport { HttpClient, HttpHeaders,HttpClientModule } from '@angular/common/http';  \n\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations'; // <-- import required BrowserAnimationsModule\nimport {AccordionModule} from \"ngx-accordion\";\nimport {PopoverController} from '@ionic/angular';\n@Component({\n  selector: 'app-flatemates',\n  templateUrl: './flatemates.page.html',\n  styleUrls: ['./flatemates.page.scss'],\n})\nexport class FlatematesPage implements OnInit {\n  issuesArr = [];\n  base_url : string = \"\";\n  teamId : string = \"\";\n  message : string = \"\";\n  sucessArr: any = [];\n  isSuccess: boolean = true;\n  isError: boolean = false;\n  logId:any=\"\";\n  constructor( \n    private route: ActivatedRoute,\n  \tprivate router: Router,\n    private http: HttpClient,\n    public itemService: ItemService,\n    public alertController: AlertController,\n    public loadingController: LoadingController,\n    public popoverController: PopoverController,\n    public modalController: ModalController) {\n  \tthis.base_url = environment.base_url;\n    this.message ='';\n      this.route.queryParams.subscribe(params => { \n      this.teamId = params['teamId'];  \n  });  \n     }\n\n  ngOnInit() {\n    this.logId = sessionStorage.getItem(\"loggedInId\");\n  \tthis.loadIssues();\n  }\n\n  loadIssues(){  \n    let token; \n    if(sessionStorage.getItem(\"auth_token\")!=undefined){\n     token = sessionStorage.getItem(\"auth_token\"); \n     console.log(token);\n    } \n    let headers = new HttpHeaders();\n    headers = headers.set('Authorization', token);\n    this.pleaseWait();\n \n    this.http.get(this.base_url+'team/issues/'+this.teamId, { headers: headers }).subscribe((response: any) => { \n    this.loadingController.dismiss();\n    this.issuesArr = response.issues;   \n    console.log(this.issuesArr);\n     },error=>{ \n        console.log(\"ERROR\");\n        console.log(error.error);\n     });  \n  }\n\n  async pleaseWait() {\n    const loading = await this.loadingController.create({\n      duration: 2000,\n      cssClass: 'custom-class custom-loading',\n      spinner:null\n    });\n    await loading.present();\n    const { role, data } = await loading.onDidDismiss();\n  }\n  removeIssue(issueId){\n      this.confirmDelete(issueId);\n  }\n\n  async confirmDelete(id) {\n    const alert = await this.alertController.create({\n    header: 'Confirm!',\n    message: 'You really want to delete issue?',\n    buttons: [\n      {\n      text: 'Cancel',\n      role: 'cancel',\n      cssClass: 'secondary',\n        handler: (blah) => {\n        console.log('Confirm Cancel: blah');\n        }\n      }, {\n        text: 'Okay',\n          handler: () => {\n          this.deleteIssue(id);\n          }\n        }\n    ]\n    });\n    await alert.present();\n  }\n\n  deleteIssue(issueId){\n    if (issueId) {\n      let token;\n      if (sessionStorage.getItem(\"auth_token\") != undefined) {\n        token = sessionStorage.getItem(\"auth_token\");\n        console.log(token);\n      }\n        let headers = new HttpHeaders();\n        headers = headers.set('Authorization', token);\n        this.http.delete(this.base_url + 'issues/remove/'+issueId ,{headers: headers}).subscribe((response: any) => {\n        console.log(response);\n        this.isSuccess = true;\n        this.sucessArr = response;\n        this.isError = false;\n        this.loadingController.dismiss().then(a => console.log('dismissed'));\n        /*this.presentLoadingCustom(response.message); */\n        this.popoverController.dismiss();\n        this.presentAlert(response.message);\n        this.sucessArr = [];\n\n\n        }, error => {\n        console.log(error.error);\n        });\n    }\n  }\n\n  async presentAlert(message) {\n    const alert = await this.alertController.create({\n      header: ' Message!',\n      subHeader: message,\n      message: 'Click Okay to redirect to groups bill listing and click Cancel to stay on same page.',\n      buttons: [{\n        text: 'Cancel',\n        role: 'cancel',\n        cssClass: 'secondary',\n        handler: (blah) => {\n          console.log('Confirmed Cancel: blah');\n        }\n      }, {\n        text: 'Okay',\n        handler: () => {\n          this.router.navigate(['dashboard']);\n          //console.log('Confirmed Okay');\n        }\n      }]\n    });\n    alert.present();\n  }\n\n\n}\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/app/pages/chatroom/chatroom.module.ts","webpack:///./src/app/pages/chatroom/chatroom.page.html","webpack:///./src/app/pages/chatroom/chatroom.page.scss","webpack:///./src/app/pages/chatroom/chatroom.page.ts"],"names":[],"mappings":"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","file":"pages-chatroom-chatroom-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\n import { IonicModule } from '@ionic/angular';\n\nimport { ChatroomPage } from './chatroom.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatroomPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ChatroomPage],\n // entryComponents: [PopoverComponent]\n\n})\nexport class ChatroomPageModule {}\n","module.exports = \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n         <ion-back-button (click)=\\\"ionViewWillLeave()\\\" defaultHref=\\\"userlist\\\"></ion-back-button>\\r\\n          <!-- <ion-menu-button></ion-menu-button> -->\\r\\n        </ion-buttons>\\r\\n\\r\\n     <!--     <ion-buttons slot=\\\"end\\\" (click)=\\\"presentPopover(event)\\\">  -->\\r\\n         <ion-buttons slot=\\\"end\\\"> \\r\\n               <ion-icon name=\\\"more\\\"></ion-icon>\\r\\n         </ion-buttons> \\r\\n        <ion-title>\\r\\n            Chatroom: {{nickname}}\\r\\n        </ion-title>\\r\\n    </ion-toolbar>\\r\\n</ion-header> \\r\\n\\r\\n<ion-content id=\\\"content\\\" #content class=\\\"scroll-content ionic-scroll  has-header\\\"> \\r\\n<ion-grid class=\\\"scroll\\\" style=\\\"-webkit-transform: translate3d(0px, -50px, 0px) scale(1); margin-top: 50px;\\\">\\r\\n    <ion-row *ngFor=\\\"let message of gruopMessages; let i = index\\\"> \\r\\n                <ion-label>{{dateFormat(message.created_at)}} </ion-label>\\r\\n\\r\\n    <ion-col  class=\\\"message\\\"> \\r\\n        <ion-item style=\\\"--inner-border-width:0px!important;\\\">\\r\\n            <span *ngIf=\\\"userId === message.from_id\\\" slot=\\\"end\\\" class=\\\"user_name\\\" style=\\\"border-radius: 10px;background: #e5efc2; padding: 10px;color: #000;word-wrap: break-word;\\\">\\r\\n            {{ message.message }} <br> {{timeFormat(message.created_at)}} \\r\\n              <ion-icon name=\\\"done-all\\\"></ion-icon> \\r\\n            </span> \\r\\n            <span *ngIf=\\\"userId !== message.from_id\\\" slot=\\\"start\\\" class=\\\"user_name\\\" style=\\\"    border-radius: 10px;background: #f1f1f1;padding: 10px;color: #000;border: 1px solid #dcd8d8;word-wrap: break-word;\\\">{{nickname}}: \\r\\n           {{message.message}}  <br>  {{dateFormat(message.created_at)}}\\r\\n            </span> \\r\\n        </ion-item> \\r\\n      </ion-col> \\r\\n    </ion-row>\\r\\n \\r\\n    <ion-row *ngFor=\\\"let message of messages\\\"> \\r\\n\\r\\n        <ion-col class=\\\"message\\\" [ngClass]=\\\"{'my_message': message.from !== nickname, 'other_message': message.from !== nickname}\\\"> \\r\\n        <ion-item style=\\\"--inner-border-width:0px!important;\\\" >\\r\\n            <span slot=\\\"end\\\" *ngIf=\\\"userId === message.userId\\\" class=\\\"user_name\\\"  style=\\\"border-radius: 10px;background: #e5efc2; padding: 10px;color: #000;word-wrap: break-word;\\\">\\r\\n            {{ message.message }}<br> {{dateFormat(message.created_at)}}     <ion-icon name=\\\"done-all\\\"></ion-icon> </span> \\r\\n            <span slot=\\\"start\\\" *ngIf=\\\"teamId === message.from && userId !== message.userId\\\" class=\\\"user_name\\\"  style=\\\"    border-radius: 10px;background: #f1f1f1;padding: 10px;color: #000;border: 1px solid #dcd8d8; word-wrap: break-word;\\\">{{message.username}}: \\r\\n           {{message.message}}  <br> {{dateFormat(message.created_at)}} </span> \\r\\n        </ion-item> \\r\\n      </ion-col>  \\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n<ion-footer>\\r\\n <ion-toolbar> \\r\\n    <ion-row class=\\\"message_row\\\">\\r\\n      <ion-col col-11>\\r\\n        <ion-item no-lines>\\r\\n          <ion-input type=\\\"text\\\" placeholder=\\\"Message\\\" [(ngModel)]=\\\"message\\\"></ion-input>\\r\\n        </ion-item>\\r\\n      </ion-col>\\r\\n      <ion-col col-1>\\r\\n        <button class=\\\"submit-btn\\\" expand=\\\"block\\\" type=\\\"submit\\\" (click)=\\\"sendMessage()\\\" [disabled]=\\\"message === ''\\\" style=\\\"    background: #ed502d;;padding: 15px 20px;color: #fff;width: 100%;border-radius: 5px;\\\">\\r\\n        Send\\r\\n      </button> \\r\\n      </ion-col>\\r\\n    </ion-row> \\r\\n  </ion-toolbar>\\r\\n</ion-footer>\"","module.exports = \"app-chatroom .user_name {\\n  color: #afafaf; }\\n\\napp-chatroom .message {\\n  padding: 10px !important;\\n  transition: all 250ms ease-in-out !important;\\n  border-radius: 10px !important;\\n  margin-bottom: 4px !important; }\\n\\napp-chatroom .my_message {\\n  color: #000 !important; }\\n\\napp-chatroom .other_message {\\n  background: #dcdcdc !important;\\n  color: #000 !important; }\\n\\napp-chatroom .time {\\n  color: #afafaf;\\n  float: right;\\n  font-size: small; }\\n\\napp-chatroom .message_row {\\n  background-color: #fff; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2hhdHJvb20vRTpcXGlvbmljX25ldy9zcmNcXGFwcFxccGFnZXNcXGNoYXRyb29tXFxjaGF0cm9vbS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFUSxlQUFjLEVBQ2pCOztBQUhMO0VBS1EseUJBQXdCO0VBQ3hCLDZDQUE0QztFQUM1QywrQkFBOEI7RUFDOUIsOEJBQTZCLEVBQ2hDOztBQVRMO0VBV1EsdUJBQXNCLEVBQ3pCOztBQVpMO0VBY1EsK0JBQThCO0VBQzlCLHVCQUFzQixFQUN6Qjs7QUFoQkw7RUFrQlEsZUFBYztFQUNkLGFBQVk7RUFDWixpQkFBZ0IsRUFDbkI7O0FBckJMO0VBdUJRLHVCQUFzQixFQUN6QiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NoYXRyb29tL2NoYXRyb29tLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImFwcC1jaGF0cm9vbSB7XG4gICAgLnVzZXJfbmFtZSB7XG4gICAgICAgIGNvbG9yOiAjYWZhZmFmO1xuICAgIH1cbiAgICAubWVzc2FnZSB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggIWltcG9ydGFudDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDI1MG1zIGVhc2UtaW4tb3V0ICFpbXBvcnRhbnQ7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHggIWltcG9ydGFudDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4ICFpbXBvcnRhbnQ7XG4gICAgfVxuICAgIC5teV9tZXNzYWdlIHtcbiAgICAgICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDtcbiAgICB9XG4gICAgLm90aGVyX21lc3NhZ2Uge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZGNkY2RjICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiAjMDAwICFpbXBvcnRhbnQ7XG4gICAgfVxuICAgIC50aW1lIHtcbiAgICAgICAgY29sb3I6ICNhZmFmYWY7XG4gICAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgICAgZm9udC1zaXplOiBzbWFsbDtcbiAgICB9XG4gICAgLm1lc3NhZ2Vfcm93IHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICB9XG59Il19 */\"","import { Component, OnInit,AfterViewChecked, ElementRef, ViewChild } from '@angular/core';\nimport { Router , ActivatedRoute, Params } from '@angular/router';\nimport { FormGroup,FormBuilder,Validators,FormControl,FormArray } from '@angular/forms';\nimport { ItemService } from '../../services/item.service';\nimport { AlertController } from '@ionic/angular';\nimport { LoadingController } from '@ionic/angular';\nimport { environment } from '../../../environments/environment';\nimport { HttpClient, HttpHeaders,HttpClientModule } from '@angular/common/http';\nimport { IonContent,ActionSheetController, Platform} from '@ionic/angular';\nimport { Socket } from 'ng-socket-io';\nimport { Observable } from 'rxjs/Observable';  \nimport { DatePipe } from '@angular/common';\nimport { PopoverController } from '@ionic/angular'; \nimport { PopoverComponent } from '../popover/popover.component';\n\n\n@Component({\n  selector: 'app-chatroom',\n  templateUrl: './chatroom.page.html',\n  styleUrls: ['./chatroom.page.scss'],\n})\nexport class ChatroomPage implements OnInit{ \n//@ViewChild(IonContent, {read: IonContent}) myContent: IonContent;\n@ViewChild(IonContent) content: IonContent;\n\nmessages = [];\ngruopMessages = [];\nsocket_url : string = \"\";\nteamId = '';\nuserId = '';\nref_code = '';\nloggedInUsername = '';\nnickname = '';\nowner = '';\nmessage = '';\nmessage_wanrings = '';\n\n\nconstructor(\n  private route: ActivatedRoute, public popoverController: PopoverController,  \n  private http: HttpClient, \n  public itemService: ItemService,\n  public alertController: AlertController,\n  public loadingController: LoadingController,\n  private socket: Socket,\n  private datePipe: DatePipe,\n) {  \n\n    this.userId = sessionStorage.getItem(\"loggedInId\"); \n    this.loggedInUsername = sessionStorage.getItem(\"loggedInUsername\");\n    this.ref_code = sessionStorage.getItem(\"ref_code\");\n    this.socket_url =   environment.socket_url;\n    this.socket.connect(); \n    this.route.queryParams.subscribe(params => { \n      this.teamId = params['teamId'];\n      this.owner = params['owner'];\n      this.nickname = params['nickname'];   \n  });   \n    this.joinChat(); \n    this.loadMessages();  \n    this.loadMyMessages();  \n    //this.getMessages();  \n} \n\nasync presentPopover(ev: any) { \n    const popover = await this.popoverController.create({\n      component: PopoverComponent,\n      componentProps:{teamId:this.teamId,baseurl: environment.base_url,ref_code:this.ref_code,group_title:this.nickname,owner:this.owner},\n      event: ev,\n      translucent: true\n    });  \n\n    return await popover.present();\n  } \n\n \n  ionViewWillLeave() {\n    console.log('dissconnetct');\n    this.socket.removeAllListeners(this.teamId);\n    this.socket.disconnect();\n  }\n  ionViewDidLeave() {\n    this.socket.removeAllListeners(this.teamId);\n    console.log('dissconnetct');\n    this.socket.disconnect();\n  }\n  ngOnInit() {   \n    this.getMessages();   \n  }\n  \n  ionViewDidEnter(){\n    this.ScrollToBottom();\n  }\n\n  joinChat() {   \n    this.socket.emit('set-nickname', {'nickname':this.nickname,'from_id':this.userId,'username':this.loggedInUsername,'to_id':this.teamId});\n  }\n\n/***************scroll down******************/\n\n  ScrollToBottom(){\n    this.content.scrollToBottom(1500);\n  }\n/***************scroll down******************/\n\n  \n  getMessages() { \n    console.log('-------getMessages-------');\n    this.socket.on('getMessage', (data) => { \n      console.log(data); \n      let counter = this.gruopMessages.length - 1;\n      if(this.gruopMessages[counter].created_at != data.created_at && this.gruopMessages[counter].username != data.username){\n /* let datas = data.map(JSON.stringify).reverse() // convert to JSON string the array content, then reverse it (to check from end to begining)\n  .filter(function(item, index, data){ return data.indexOf(item, index + 1) === -1; }) // check if there is any occurence of the item in whole array\n  .reverse().map(JSON.parse);*/\n \n      this.gruopMessages.push(data);\n    }\n    console.log('lllll',this.gruopMessages);\n    });   \n  } \n\nasync loadMyMessages() { //fetch request get from db\n    this.socket.on('messages', (data) => {  \n    this.gruopMessages = data.messages;  \n\n    }); \n    console.log(this.gruopMessages);\n  }\n\n loadMessages() { // Initiate request get from db\n  this.socket.emit('load-messages',{userId: this.userId,teamId: this.teamId} ); \n  console.log(this.gruopMessages);\n  }\n isEmptyOrSpaces(str){\n    return str === null || str.match(/^ *$/) !== null;\n}\n  sendMessage() { \n  if(!this.isEmptyOrSpaces(this.message)){ \n      let created_at = new Date();\n      this.socket.emit('newMessage', { userId: this.userId,teamId: this.teamId,username:this.loggedInUsername,msg: this.message,created_at});\n      this.gruopMessages.push({created_at,from_id:this.userId,userId: this.teamId, from: this.userId,username:this.loggedInUsername,message: this.message});\n      this.message = '';  \n      this.ScrollToBottom();\n      this.message_wanrings ='';\n    }\n    else\n    {\n      this.message_wanrings = 'Please enter message';  \n    }\n  }\n \n  timeFormat(date){\n    if(date !='undefined'){      \n        var d= new Date(date);\n        var a = this.datePipe.transform(d,'h:mm a');\n        return a;\n    }\n  }\n  dateFormat(date){\n    if(date !='undefined'){      \n        var d= new Date(date);\n        var a = this.datePipe.transform(d,'dd-MM-yyyy');\n         return a;\n    }\n  }\n  \n\n}"],"sourceRoot":""}